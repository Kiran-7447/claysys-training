<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TypeScript Calculator</title>

<style>
body {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background: #f4f4f4;
  font-family: Arial, sans-serif;
}

.calculator {
  width: 260px;
  border: 3px solid #333;
  padding: 20px;
  background: white;
}

#display {
  width: 100%;
  height: 50px;
  font-size: 20px;
  text-align: right;
  margin-bottom: 15px;
  padding-right: 10px;
}

.buttons {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}

button {
  height: 50px;
  font-size: 18px;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="calculator">
  <input type="text" id="display" value="0" disabled>

  <div class="buttons">
    <button data-value="7">7</button>
    <button data-value="8">8</button>
    <button data-value="9">9</button>
    <button data-value="/">/</button>

    <button data-value="4">4</button>
    <button data-value="5">5</button>
    <button data-value="6">6</button>
    <button data-value="*">*</button>

    <button data-value="1">1</button>
    <button data-value="2">2</button>
    <button data-value="3">3</button>
    <button data-value="-">-</button>

    <button data-value="0">0</button>
    <button id="clear">C</button>
    <button id="equals">=</button>
    <button data-value="+">+</button>
  </div>
</div>

<script>
// TypeScript Logic (Compiled to JS)

let currentInput = "";
let previousInput = "";
let operator = null;

const display = document.getElementById("display");
const buttons = document.querySelectorAll("button");
const clearBtn = document.getElementById("clear");
const equalsBtn = document.getElementById("equals");

function updateDisplay(value) {
  display.value = value;
}

function appendNumber(num) {
  if (currentInput === "0") {
    currentInput = num;
  } else {
    currentInput += num;
  }
  updateDisplay(currentInput);
}

function chooseOperator(op) {
  if (currentInput === "") return;

  if (previousInput !== "") {
    calculate();
  }

  operator = op;
  previousInput = currentInput;
  currentInput = "";
}

function calculate() {
  if (!operator || currentInput === "" || previousInput === "") return;

  const prev = parseFloat(previousInput);
  const current = parseFloat(currentInput);
  let result = 0;

  switch (operator) {
    case "+":
      result = prev + current;
      break;
    case "-":
      result = prev - current;
      break;
    case "*":
      result = prev * current;
      break;
    case "/":
      if (current === 0) {
        updateDisplay("Error");
        clearAll();
        return;
      }
      result = prev / current;
      break;
  }

  currentInput = result.toString();
  operator = null;
  previousInput = "";
  updateDisplay(currentInput);
}

function clearAll() {
  currentInput = "";
  previousInput = "";
  operator = null;
  updateDisplay("0");
}

buttons.forEach(button => {
  const value = button.getAttribute("data-value");

  if (value) {
    button.addEventListener("click", () => {
      if (!isNaN(Number(value))) {
        appendNumber(value);
      } else {
        chooseOperator(value);
      }
    });
  }
});

equalsBtn.addEventListener("click", calculate);
clearBtn.addEventListener("click", clearAll);

</script>

</body>
</html>